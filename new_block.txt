            <div class="settings-notif-options">
              <article class="settings-notif-option">
                <div class="settings-notif-option__body">
                  <h3>Push notifications</h3>
                  <p>Receive updates even when the app is closed. Works on Chrome, Edge, and iOS PWAs.</p>
                </div>
                <div class="settings-notif-option__actions">
                  <label class="settings-toggle">
                    <input
                      type="checkbox"
                      checked={notif.pushEnabled}
                      disabled={pushToggleBusy || enablePushLoading}
                      onchange={handlePushToggleChange}
                    />
                    <span class="settings-toggle__track" aria-hidden="true">
                      <span class="settings-toggle__thumb" aria-hidden="true"></span>
                    </span>
                    <span class="settings-toggle__label">
                      {notif.pushEnabled ? 'Enabled on this device' : 'Tap to enable push'}
                    </span>
                  </label>
                </div>
              </article>

              <article class="settings-notif-option">
                <div class="settings-notif-option__body">
                  <h3>Desktop banners</h3>
                  <p>Let this browser show native alerts whenever new activity lands.</p>
                </div>
                <div class="settings-notif-option__actions">
                  <label class="settings-toggle">
                    <input
                      type="checkbox"
                      checked={notif.desktopEnabled}
                      disabled={desktopToggleBusy}
                      onchange={handleDesktopToggleChange}
                    />
                    <span class="settings-toggle__track" aria-hidden="true">
                      <span class="settings-toggle__thumb" aria-hidden="true"></span>
                    </span>
                    <span class="settings-toggle__label">
                      {notif.desktopEnabled ? 'Desktop alerts enabled' : 'Enable desktop alerts'}
                    </span>
                  </label>
                </div>
              </article>
            </div>

            <p class="settings-hint">
              Need iOS alerts? Open hConnect in Safari, tap “Add to Home Screen,” launch from the icon, then enable push above.
            </p>

            {#if }
              <div class="settings-notif-debug" aria-live="polite">
                <div class="settings-notif-debug__header">
                  <div>
                    <h3>Send test push</h3>
                    <p>Super admins can fire a diagnostic push to this device.</p>
                  </div>
                  <button
                    class="settings-chip settings-chip--secondary"
                    aria-busy={testPushState === 'loading'}
                    disabled={!notif.pushEnabled || testPushState === 'loading'}
                    onclick={sendTestPushNotification}
                  >
                    {testPushState === 'loading' ? 'Sending…' : 'Send test push'}
                  </button>
                </div>
                {#if testPushMessage}
                  <p
                    class="settings-notif-status"
                    class:settings-notif-status--success={testPushState === 'success'}
                    class:settings-notif-status--error={testPushState === 'error'}
                  >
                    {testPushMessage}
                  </p>
                {/if}
                <div class="settings-push-debug">
                  <div class="settings-push-debug__header">
                    <div>
                      <h4>Push debug log</h4>
                      <p class="settings-push-debug__hint">
                        {#if pushDebugCopyState === 'copied'}
                          Copied to clipboard.
                        {:else if pushDebugCopyState === 'error'}
                          Could not copy log. Copy manually from below.
                        {:else}
                          Diagnostic entries from enable/test actions.
                        {/if}
                      </p>
                    </div>
                    <div class="settings-push-debug__actions">
                      <button
                        class="settings-chip"
                        onclick={copyPushDebugLog}
                        disabled={!pushDebugLog.length || pushDebugCopyState === 'copying'}
                      >
                        {#if pushDebugCopyState === 'copying'}
                          Copying...
                        {:else if pushDebugCopyState === 'copied'}
                          Copied!
                        {:else}
                          Copy log
                        {/if}
                      </button>
                      <button class="settings-chip settings-chip--secondary" onclick={resetStatusDebugLog}>
                        Clear log
                      </button>
                    </div>
                  </div>
                  <div>
                    <div class="settings-push-debug__header">
                      <div>
                        <h4>Status log</h4>
                        <p class="settings-push-debug__hint">Live feed from the service worker.</p>
                      </div>
                      <div class="settings-push-debug__actions">
                        <button class="settings-chip" onclick={copyStatusMessage} disabled={!message}>
                          Copy status
                        </button>
                      </div>
                    </div>
                    {#if pushDebugLog.length}
                      <ol class="settings-push-debug__list">
                        {#each pushDebugLog as entry (entry.id)}
                          <li class="settings-push-debug__item" data-level={entry.level}>
                            <div class="settings-push-debug__meta">
                              <span class="settings-push-debug__time">{formatDebugTimestamp(entry.timestamp)}</span>
                              {#if entry.tag}
                                <span class="settings-push-debug__tag">{entry.tag}</span>
                              {/if}
                              <span class="settings-push-debug__level">{entry.level}</span>
                            </div>
                            <p class="settings-push-debug__message">{entry.message}</p>
                            {#if entry.details}
                              <pre class="settings-push-debug__details">{entry.details}</pre>
                            {/if}
                          </li>
                        {/each}
                      </ol>
                    {:else}
                      <p class="settings-push-debug__empty">
                        Logs appear here when you enable push or send a test notification.
                      </p>
                    {/if}
                  </div>
                </div>
              </div>
            {/if}

            <p class="settings-hint">
              Want per-server controls? Tell us what would help and we'll line it up next.
            </p>
