import"../chunks/DsnmJJEf.js";import{p as h,ad as q,d as M}from"../chunks/fyz5Uh2_.js";import{a as A,s as S}from"../chunks/Ccn6MRGn.js";import{q as p,b as j,w as i,c as d,o as u,u as v}from"../chunks/BTntQMEq.js";import{d as w}from"../chunks/BcR-18cJ.js";import"../chunks/BqQ7FUxX.js";import"../chunks/JjVbo-H9.js";const O=!1,C=Object.freeze(Object.defineProperty({__proto__:null,ssr:O},Symbol.toStringTag,{value:"Module"}));function D(P,m){h(m,!0);const[l,f]=S(),_=()=>A(v,"$user",l);let a,e;function $(o){if(!o)return;const n=w(),g=p(d(n,"dms"),i("participants","array-contains",o),j("lastMessageAt","desc")),b=p(d(n,"dms"),i("participants","array-contains",o));a=u(g,c=>{c.docs.map(s=>({id:s.id,...s.data()}))},c=>{e=u(b,s=>{s.docs.map(t=>({id:t.id,...t.data()})).sort((t,y)=>(y.lastMessageAt?.seconds??0)-(t.lastMessageAt?.seconds??0))})})}function r(){a?.(),e?.(),a=void 0,e=void 0}q(()=>(r(),$(_()?.uid),()=>r())),M(),f()}export{D as component,C as universal};
